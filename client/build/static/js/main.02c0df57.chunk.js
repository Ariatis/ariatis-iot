(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(38),o=a.n(l),u=a(28),c=(a(72),a(73),a(9)),s=a(10),m=a(12),i=a(11),d=a(13),p=a(24),E=a(116),f=a(117),b=a(58),g=a(123),h=a(120),v=a(118),y=a(14),j=a.n(y),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(i.a)(t).call(this,e))).state={addBdd:!1,errorBdd:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onFormSubmit",value:function(e){var t=this;e.preventDefault();var a={nom:document.getElementById("nomCapteur").value,refModele:document.getElementById("refModele").value,constructeur:document.getElementById("constructeur").value,typeMesure:document.getElementById("typeMesure").value,uniteMesure:document.getElementById("uniteMesure").value,reseau:document.getElementById("reseau").value,latitude:document.getElementById("latitude").value,longitude:document.getElementById("longitude").value};j.a.post("/capteurs",a).then(function(e){200===e.status?t.setState({addBdd:!0,errorBdd:!1}):t.setState({addBdd:!1,errorBdd:!0})}).then(this.setState({addBdd:!1,errorBdd:!1})).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return r.a.createElement("section",{id:"ajout-capteur"},r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{xs:12,md:{span:6,offset:3}},r.a.createElement(g.a,null,r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Title,null,"Ajouter un nouveau capteur")),r.a.createElement(g.a.Body,null,r.a.createElement(h.a,{onSubmit:this.onFormSubmit.bind(this)},r.a.createElement(h.a.Group,{controlId:"nomCapteur"},r.a.createElement(h.a.Label,null,"Nom du capteur"),r.a.createElement(h.a.Control,{type:"text",placeholder:"Mon capteur 1"})),r.a.createElement(h.a.Group,{controlId:"refModele"},r.a.createElement(h.a.Label,null,"R\xe9f\xe9rence du mod\xe8le"),r.a.createElement(h.a.Control,{type:"text",placeholder:"R\xe9f\xe9rence du capteur"})),r.a.createElement(h.a.Group,{controlId:"constructeur"},r.a.createElement(h.a.Label,null,"Constructeur"),r.a.createElement(h.a.Control,{type:"text",placeholder:"Constructeur du capteur"})),r.a.createElement(h.a.Group,{controlId:"typeMesure"},r.a.createElement(h.a.Label,null,"Type de mesure"),r.a.createElement(h.a.Control,{as:"select"},r.a.createElement("option",null,"Pluviom\xe9trie"),r.a.createElement("option",null,"Vitesse"),r.a.createElement("option",null,"Temp\xe9rature"),r.a.createElement("option",null,"Position GPS"),r.a.createElement("option",null,"Volume"),r.a.createElement("option",null,"Poids"))),r.a.createElement(h.a.Group,{controlId:"uniteMesure"},r.a.createElement(h.a.Label,null,"Unit\xe9 de mesure"),r.a.createElement(h.a.Control,{as:"select"},r.a.createElement("option",null,"mm"),r.a.createElement("option",null,"km/h"),r.a.createElement("option",null,"\xb0C"),r.a.createElement("option",null,"Coordonn\xe9es GPS"),r.a.createElement("option",null,"m3"),r.a.createElement("option",null,"Kg"))),r.a.createElement(h.a.Group,{controlId:"reseau"},r.a.createElement(h.a.Label,null,"R\xe9seau utilis\xe9"),r.a.createElement(h.a.Control,{type:"text",placeholder:"Sigfox, ..."})),r.a.createElement(h.a.Group,{controlId:"latitude"},r.a.createElement(h.a.Label,null,"Latitude"),r.a.createElement(h.a.Control,{type:"text",placeholder:"2.294481"})),r.a.createElement(h.a.Group,{controlId:"longitude"},r.a.createElement(h.a.Label,null,"Longitude"),r.a.createElement(h.a.Control,{type:"text",placeholder:"48.858370"})),r.a.createElement(v.a,{type:"reset"},"Annuler"),r.a.createElement(v.a,{variant:"primary",type:"submit"},"Enregistrer"))))))))}}]),t}(n.Component),O=a(15),D=a.n(O),x=a(23),C=a(119),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(i.a)(t).call(this,e))).callCapteurs=Object(x.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/capteurs");case 2:return t=e.sent,e.next=5,t.data;case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.state={data:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callCapteurs().then(function(t){return e.setState({data:t})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=null!==this.state.data&&this.state.data.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.nom),r.a.createElement("td",null,e.refModele),r.a.createElement("td",null,e.constructeur),r.a.createElement("td",null,e.typeMesure),r.a.createElement("td",null,e.uniteMesure),r.a.createElement("td",null,e.reseau),r.a.createElement("td",null,"x:",e.latitude," y:",e.longitude))});return r.a.createElement("section",{id:"capteurs"},r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{xs:12},r.a.createElement(C.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nom"),r.a.createElement("th",null,"R\xe9f\xe9rence"),r.a.createElement("th",null,"Constructeur"),r.a.createElement("th",null,"Type de mesure"),r.a.createElement("th",null,"Unit\xe9 de mesure"),r.a.createElement("th",null,"R\xe9seau"),r.a.createElement("th",null,"Coordonn\xe9es GPS"))),r.a.createElement("tbody",null,e))))))}}]),t}(n.Component),I=a(29),S=a.n(I),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(i.a)(t).call(this,e))).callCapteurs=Object(x.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/ensembles");case 2:return t=e.sent,e.next=5,t.data;case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.state={data:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callCapteurs().then(function(t){return e.setState({data:t})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=null!==this.state.data&&this.state.data.map(function(e,t){return r.a.createElement(b.a,{xs:12,md:4,key:t},r.a.createElement(g.a,null,r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Title,null,e.nom)),r.a.createElement(g.a.Body,null,void 0!==e.capteurs&&e.capteurs.map(function(e,t){return r.a.createElement(b.a,{xs:12,key:t,id:e.capteurID},r.a.createElement("img",{src:S.a,alt:e.capteurNom}),e.capteurNom)}))))});return r.a.createElement("section",{id:"ensembles"},r.a.createElement(E.a,null,r.a.createElement(f.a,null,e)))}}]),t}(n.Component),G=a(42),M=a(31),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(i.a)(t).call(this,e))).onDragStart=function(e,t,a){e.dataTransfer.setData("id",t),e.dataTransfer.setData("nom",a)},a.onDragOver=function(e){e.preventDefault()},a.onDropAdd=function(e,t){var n=e.dataTransfer.getData("id"),r=e.dataTransfer.getData("nom"),l=a.state.group.filter(function(e){if(e.nom===t)if(void 0===e.capteurs)e.capteurs=[{capteurID:n,capteurNom:r}],a.updateGroup(e.nom,e.capteurs);else{var o=Object(M.a)(e.capteurs);o.push({capteurID:n,capteurNom:r}),e.capteurs=o,a.updateGroup(e.nom,e.capteurs)}return l});a.setState(Object(G.a)({},a.state))},a.onDragStartRemove=function(e,t,a,n){e.dataTransfer.setData("id",t),e.dataTransfer.setData("nom",a),e.dataTransfer.setData("groupNom",n)},a.onDropRemove=function(e){var t=e.dataTransfer.getData("id"),n=e.dataTransfer.getData("groupNom"),r=a.state.group.filter(function(e){if(e.nom===n){var l=Object(M.a)(e.capteurs);l.map(function(n,o){return n.capteurID===t&&(l.splice(o,1),e.capteurs=l,a.updateGroup(e.nom,e.capteurs)),r})}return r});a.setState(Object(G.a)({},a.state))},a.callCapteurs=Object(x.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/capteurs");case 2:return t=e.sent,e.next=5,t.data;case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.callEnsembles=Object(x.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/ensembles");case 2:return t=e.sent,e.next=5,t.data;case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)})),a.state={capteurs:null,group:[],addEnsembleErr:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.callCapteurs().then(function(t){return e.setState({capteurs:t})}).catch(function(e){return console.log(e)}),this.callEnsembles().then(function(t){return e.setState({group:t})}).catch(function(e){return console.log(e)})}},{key:"nameEnsemble",value:function(){this.setState({addEnsembleErr:!1})}},{key:"addGroup",value:function(e){e.preventDefault();var t=Object(M.a)(this.state.group),a=document.getElementById("nomEnsemble").value;""!==a?t.push({nom:a}):this.setState({addEnsembleErr:!0}),this.setState({group:t});var n={nom:a,capteurs:[]};this.postGroup(n)}},{key:"dragging",value:function(e){document.getElementById(e).style.cursor="grabbing"}},{key:"draggable",value:function(e){document.getElementById(e).style.cursor="grab"}},{key:"removeGroup",value:function(e){var t=Object(M.a)(this.state.group);t.map(function(a,n){return console.log(a.nom,e),a.nom===e&&(t.splice(n,1),a=t),t}),this.setState({group:t}),console.log("groups : ",t),this.deleteGroup(e)}},{key:"postGroup",value:function(e){j.a.post("/ensembles",e).catch(function(e){return console.log(e)})}},{key:"updateGroup",value:function(e,t){j.a.put("/ensembles/"+e,t).catch(function(e){return console.log(e)})}},{key:"deleteGroup",value:function(e){j.a.delete("/ensembles/"+e).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"gerer_ensembles"},r.a.createElement(E.a,null,r.a.createElement(h.a,{onSubmit:this.addGroup.bind(this)},r.a.createElement(h.a.Row,null,r.a.createElement(b.a,null,r.a.createElement(h.a.Control,{id:"nomEnsemble",type:"text",placeholder:"Nom de l'ensemble",onChange:this.nameEnsemble.bind(this)}),this.state.addEnsembleErr&&r.a.createElement(h.a.Text,{className:"error"},"Vous devez entrer un nom pour votre ensemble")),r.a.createElement(b.a,null,r.a.createElement(v.a,{type:"submit"},"Ajouter un ensemble")))),r.a.createElement(f.a,null,r.a.createElement(b.a,{xs:12,md:6},r.a.createElement(g.a,null,r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Title,null,"Mes capteurs")),r.a.createElement(g.a.Body,{onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){return e.onDropRemove(t)}},null!==this.state.capteurs&&this.state.capteurs.map(function(t){return r.a.createElement(b.a,{xs:12,md:6,draggable:!0,key:t._id,id:t._id,onDragStart:function(a){return e.onDragStart(a,t._id,t.nom)},onMouseDown:e.dragging.bind(e,t._id),onMouseUp:e.draggable.bind(e,t._id)},r.a.createElement("img",{src:S.a,alt:t.nom}),t.nom)})))),r.a.createElement(b.a,{xs:12,md:6},this.state.group.map(function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Title,null,t.nom)),r.a.createElement(g.a.Body,{onDragOver:function(t){return e.onDragOver(t)},onDrop:function(a){return e.onDropAdd(a,t.nom)}},void 0!==t.capteurs&&t.capteurs.map(function(a,n){return r.a.createElement(b.a,{xs:12,md:6,key:n,draggable:!0,id:a.capteurID,onDragStart:function(n){return e.onDragStartRemove(n,a.capteurID,a.capteurNom,t.nom)},onMouseDown:e.dragging.bind(e,a.capteurID),onMouseUp:e.draggable.bind(e,a.capteurID)},r.a.createElement("img",{src:S.a,alt:a.capteurNom}),a.capteurNom)})),r.a.createElement(g.a.Footer,{className:"text-muted",onClick:e.removeGroup.bind(e,t.nom)},"Supprimer l'ensemble"))})))))}}]),t}(n.Component),T=function(){return r.a.createElement("main",null,r.a.createElement(p.g,null,r.a.createElement(p.d,{exact:!0,path:"/",component:k}),r.a.createElement(p.d,{path:"/mescapteurs",component:w}),r.a.createElement(p.d,{path:"/mesensembles",component:B}),r.a.createElement(p.d,{path:"/gestionensembles",component:L}),r.a.createElement(p.d,{path:"/ajoutcapteurs",component:k})))},N=a(122),R=a(121),_=a(30),A=a(61),P=a.n(A),K=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{bg:"light",expand:"lg"},r.a.createElement(N.a.Brand,null,r.a.createElement("img",{src:P.a,alt:"Logo Ariatis"})),r.a.createElement(N.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(N.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(R.a,{className:"mr-auto"},r.a.createElement(_.LinkContainer,{to:"/mescapteurs"},r.a.createElement(R.a.Link,{eventKey:0},"Mes capteurs")),r.a.createElement(_.LinkContainer,{to:"/mesensembles"},r.a.createElement(R.a.Link,{eventKey:1},"Mes ensembles")),r.a.createElement(_.LinkContainer,{to:"/ajoutcapteurs"},r.a.createElement(R.a.Link,{eventKey:2},"Ajouter des capteurs")),r.a.createElement(_.LinkContainer,{to:"/gestionensembles"},r.a.createElement(R.a.Link,{eventKey:3},"G\xe9rer mes ensembles")))))}}]),t}(n.Component),H=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(K,null),r.a.createElement(T,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(u.BrowserRouter,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},29:function(e,t,a){e.exports=a.p+"static/media/capteurs.72109901.png"},61:function(e,t,a){e.exports=a.p+"static/media/ariatis_logo_full.3163df45.png"},67:function(e,t,a){e.exports=a(115)},72:function(e,t,a){},73:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.02c0df57.chunk.js.map